<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>BuildingQuality</title>
	
	<meta name="description" content="BuildingQuality">
	<meta name="author" content="Mike Hugo">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Core and extension CSS files -->
	<!-- <link rel="stylesheet" href="../deck.js/core/deck.core.css"> -->
	
	<link href="../deck.js.custom/syntaxhighlighter/styles/shCore.css" rel="stylesheet" type="text/css" />
	<link href="../deck.js.custom/syntaxhighlighter/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />

	<style>
	@media print {
		.slide {
			page-break-inside:avoid;
		}
	}
	</style>

</head>

<body class="deck-container">
<div class="slide">
<h1>Tools and Process for Quality Code</h1>
</div>
1<hr/>
<div class="slide"><h2>Automate, Automate, Automate</h2>
<ul>
  <li>Unit, Integration, Functional Tests</li>
  <li>Code Coverage reports</li>
  <li>Static Analysis tools</li>
  <li>Code Complexity reports</li>
  <li>Peer Review</li>
  <li>Capture historical metrics</li>
</ul>
</div>
2<hr/>
<div class="slide"><h2>Code Coverage</h2>
<ul>
  <li>How thoroughly is your production code exercised by your test code</li>
  <li>Indicator as to the quality of your <strong>tests</strong>, not necessarily prod code</li>
</ul>
</div>
3<hr/>
<div class="slide"><h2>Function coverage</h2>
<ul>
  <li>function (method) invoked</li>
</ul>
<pre class="brush:java">
	int foo (int x, int y)
	{
	    int z = 0;
	    if ((x>0) && (y>0)) {
	        z = x;
	    }
	    return z;
	}
</pre>
<ul>
  <li>satisfied by foo(1,1)</li>
</ul>
</div>
4<hr/>
<div class="slide"><h2>Line coverage</h2>
<ul>
  <li>line of code executed</li>
</ul>
<pre class="brush:java">
	int foo (int x, int y)
	{
	    int z = 0;
	    if ((x>0) && (y>0)) {
	        z = x;
	    }
	    return z;
	}
</pre>
<ul>
  <li>satisfied by foo(1,1) - every line (including z=x) gets hit</li>
</ul>
</div>
5<hr/>
<div class="slide"><h2>Decision Coverage</h2>
<ul>
  <li>all code paths executed</li>
</ul>
<pre class="brush:java">
	int foo (int x, int y)
	{
	    int z = 0;
	    if ((x>0) && (y>0)) {
	        z = x;
	    }
	    return z;
	}
</pre>
<ul>
  <li>satisfied by foo(1,1) and foo(0,1)
  <ul>
    <li>foo(1,1) goes into the if statement</li>
    <li>foo (0,1) does not go into the if statement</li>
  </ul></li>
</ul>
</div>
6<hr/>
<div class="slide"><h2>Condition Coverage</h2>
<ul>
  <li>each boolean sub-expression evaluated</li>
</ul>
<pre class="brush:java; highlight:[4]">
	int foo (int x, int y)
	{
	    int z = 0;
	    if ((x>0) && (y>0)) {
	        z = x;
	    }
	    return z;
	}
</pre>
<ul>
  <li>satisfied by foo(1,1), foo(1,0) and foo(0,0)
  <ul>
    <li>foo(1,1) satisfies both (x&gt;0) &amp;&amp; (y&gt;0)</li>
    <li>foo(0,1) satisfies (y&gt;0)</li>
    <li>foo(1,0) satisfies (x&gt;0)</li>
  </ul></li>
</ul>
</div>
7<hr/>
<div class="slide"><h2>Code Coverage caveats</h2>
<ul>
  <li>good code coverage doesn't imply good tests</li>
  <li>most useful for finding gaps in test coverage</li>
</ul>
</div>
8<hr/>
<div class="slide"><h2>Java Tools</h2>
<ul>
  <li>Emma</li>
  <li>Cobertura</li>
  <li>Clover (commercial)</li>
</ul>
</div>
9<hr/>
<div class="slide"><h2>Grails</h2>
<ul>
  <li>grails install-plugin code-coverage</li>
</ul>
</div>
10<hr/>
<div class="slide"><h2>Static code analysis</h2>
<ul>
  <li>Analyze code (in an automated and repeatable fashion) to find
  <ul>
    <li>defects</li>
    <li>bad practices</li>
    <li>inconsistencies</li>
    <li>style issues</li>
  </ul></li>
</ul>
</div>
11<hr/>
<div class="slide"><h2>What to check</h2>
<ul>
  <li>Largely project / team dependent</li>
  <li>Quick Hit examples:
  <ul>
    <li>logging: println, system.err, system.out</li>
    <li>concurrency issues: SimpleDateFormat property should not be static</li>
    <li>testing: JUnit SetUp method should call super</li>
  </ul></li>
</ul>
</div>
12<hr/>
<div class="slide"><h2>Tools</h2>
<ul>
  <li>Java
  <ul>
    <li>PMD, Checkstyle, FindBugs</li>
  </ul></li>
  <li>Groovy
  <ul>
    <li>CodeNarc, GMetrics</li>
  </ul></li>
  <li>.NET
  <ul>
    <li>VS 2010 <strong>Premium</strong>, FxCop, StyleCop</li>
  </ul></li>
</ul>
</div>
13<hr/>
<div class="slide"><h2>UI Static Analysis</h2>
<ul>
  <li>JavaScript is code, too</li>
  <li>As sites become more and more interactive on the front end, lots of functionality goes into the UI</li>
  <li>Can help with cross browser compatibility issues</li>
</ul>
</div>
14<hr/>
<div class="slide"><h2>Tools</h2>
<ul>
  <li>JavaScript
  <ul>
    <li>JSLint (http://jslint.com/)</li>
    <li>Google Closure Compiler (https://developers.google.com/closure/compiler/)</li>
    <li>JSHint (http://www.jshint.com/)</li>
  </ul></li>
</ul>
</div>
15<hr/>
<div class="slide"><h2>JSLint and Grails</h2>
<ul>
  <li>grails install-plugin jslint</li>
  <li>grails jslint</li>
  <li><p>create a config file grails-app/conf/JsLintConfig.groovy to customize settings</p></li>
</ul>
</div>
16<hr/>
<div class="slide"><h2>Continuous Integration</h2>
<ul>
  <li>Frequently integrate code from all developers</li>
  <li>Build, compile and test</li>
  <li>Builds triggered by changes in repository (not on a schedule)</li>
  <li>Notifications</li>
</ul>
</div>
17<hr/>
<div class="slide"><h2>Maintain Code Repository</h2>
<ul>
  <li>Use source control
  <ul>
    <li>Subversion</li>
    <li>Git</li>
    <li>Mercurial</li>
    <li>TFS</li>
    <li>tons of options - pick one and use it!</li>
  </ul></li>
  <li>Everything required to build and test the system should reside in source control</li>
  <li>Designate a branch that is the current "main line" (e.g. trunk, master, etc) that should ALWAYS build successfully</li>
</ul>
</div>
18<hr/>
<div class="slide"><h2>Automate the Build</h2>
<ul>
  <li>build should be reproducible</li>
  <li>include database schema</li>
  <li>analyze changes and perform appropriate actions based on changeset
  <ul>
    <li>you don't have to rebuild a component if it hasn't changed</li>
  </ul></li>
  <li>keep it fast</li>
</ul>
</div>
19<hr/>
<div class="slide"><h2>Self Testing</h2>
<ul>
  <li>include automated tests in the build process
  <ul>
    <li>unit, integration, functional</li>
  </ul></li>
  <li>static analysis</li>
  <li>if possible, test in a clone of production</li>
</ul>
</div>
20<hr/>
<div class="slide"><h2>Public, visible, and easy to use</h2>
<ul>
  <li>make it easy for anyone to get the latest build artifacts</li>
  <li>publish results for all to see
  <ul>
    <li>build (lava) lamps</li>
    <li>information radiator (tv screen / old computer monitor)</li>
  </ul></li>
  <li>send notifications to entire team</li>
</ul>
</div>
21<hr/>
<div class="slide"><h2>Build Tool - Jenkins</h2>
<ul>
  <li>Formerly known as Hudson</li>
  <li>Extensible build server</li>
  <li>Web Based</li>
  <li>Master/Slave capabilities for distributed build systems</li>
  <li>Plugin architecture (over 400 plugins)</li>
</ul>
</div>
22<hr/>
<div class="slide"><h2>Peer Review</h2>
<ul>
  <li>Another form of (human based!) static analysis</li>
  <li>Knowledge sharing</li>
  <li>Peer pressure to write good code</li>
  <li>Find bugs early</li>
</ul>
</div>
23<hr/>
<div class="slide"><h2>Example Peer Review process</h2>
<ul>
  <li>Small team, 5 developers</li>
  <li>no dedicated QA</li>
  <li>"Master" branch pushed to production several times a week</li>
</ul>
</div>
24<hr/>
<div class="slide"><h2>Feature Branches</h2>
<ul>
  <li>Start a task, create a new branch</li>
  <li>development occurs on that branch by a single (or multiple) developers</li>
  <li>Jenkins job monitors the repository for new / deleted feature branches, creates a build for each feature branch</li>
  <li>Feature branches can be automatically deployed to a test server</li>
</ul>
</div>
25<hr/>
<div class="slide"><h2>Peer Review</h2>
<ul>
  <li>When feature implementation is complete, developer issues a "pull request" to the master branch</li>
  <li>Reference any bug tickets fixed</li>
  <li>Document what the feature is, how it works, and proposed test strategy</li>
  <li>A different developer(s) picks up the task of reviewing the pull request</li>
</ul>
</div>
26<hr/>
<div class="slide"><h2>Peer Review</h2>
<ul>
  <li>Double check the build(s) for the branch are all passing</li>
  <li>Deploy the feature branch to a test server and try to break it</li>
  <li>Review the code, offer feedback/comments on the changes made in the branch</li>
  <li>in 2 months of working with this process:
  <ul>
    <li>136 pull requests</li>
    <li>67% were revised before merge into master based on review/testing</li>
  </ul></li>
</ul>
</div>
27<hr/>
<div class="slide"><h2>Peer Review</h2>
<ul>
  <li>Automated cleanup</li>
  <li>When branch is merged into master
  <ul>
    <li>builds created for the branch are deleted</li>
    <li>test server is freed up for a new feature branch</li>
  </ul></li>
  <li>Master branch is built (and deployed to production)</li>
</ul>
</div>
28<hr/>
<div class="slide"><h2>Project health over time</h2>
<ul>
  <li>Statistics can help indicate trouble spots</li>
  <li>Record and report on stats over time
  <ul>
    <li>number of tests</li>
    <li>test coverage</li>
    <li>code complexity</li>
    <li>static analysis bugs</li>
  </ul></li>
  <li>Sonar (http://www.sonarsource.org/)</li>
</ul>
</div>
29<hr/>
<div class="slide"><h2>References</h2>
<ul>
  <li>http://www.javaranch.com/journal/2004/01/IntroToCodeCoverage.html</li>
  <li>http://en.wikipedia.org/wiki/Static_code_analysis</li>
  <li>http://blog.octo.com/en/analyzing-groovy-grails-code/</li>
  <li>http://stackoverflow.com/questions/534601/are-there-any-javascript-static-analysis-tools</li>
  <li>http://martinfowler.com/articles/continuousIntegration.html</li>
</ul>

</div>

<p class="attribution" style="font-size:0.6em;"><a rel="license" href="http://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/80x15.png" /></a> &nbsp;Mike Hugo, <a href="http://piragua.com">Piragua Consulting, Inc.</a>
</p>


<script src="../deck.js.custom/syntaxhighlighter/scripts/shCore.js" type="text/javascript"></script>
<script src="../deck.js.custom/syntaxhighlighter/scripts/shBrushPlain.js" type="text/javascript"></script>
<script src="../deck.js.custom/syntaxhighlighter/scripts/shBrushCss.js" type="text/javascript"></script>
<script src="../deck.js.custom/syntaxhighlighter/scripts/shBrushGroovy.js" type="text/javascript"></script>
<script src="../deck.js.custom/syntaxhighlighter/scripts/shBrushJScript.js" type="text/javascript"></script>
<script src="../deck.js.custom/syntaxhighlighter/scripts/shBrushJava.js" type="text/javascript"></script>
<script src="../deck.js.custom/syntaxhighlighter/scripts/shBrushSql.js" type="text/javascript"></script>
<script src="../deck.js.custom/syntaxhighlighter/scripts/shBrushXml.js" type="text/javascript"></script>

<script type="text/javascript">
	SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.all()
</script>

</body>
</html>
