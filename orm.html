<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Object Relational Mapping in Grails</title>

	<link href="theme/css/syntaxhighlighter/shCore.css" rel="stylesheet" type="text/css" />
	<link href="theme/css/syntaxhighlighter/shThemeDefault.css" rel="stylesheet" type="text/css" />

    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Object Relational Mapping in Grails</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              1/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Object Relational Mapping in Grails</h1></header>
            
            
            <section><ul>
<li>Grails Object Relational Mapping</li>
<li>CRUD</li>
<li>Constraints/Validation</li>
<li>Relationships </li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              2/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Domain Class Basics</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              3/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Domain Class Location Convention</h1></header>
            
            
            <section><pre class="brush: text; highlight:[6]">
    ├── grails-app
    │   ├── conf
    │   │   ├── hibernate
    │   │   ├── spring
    │   ├── controllers
    │   ├── domain
    │   ├── i18n
    │   ├── services
    │   ├── taglib
    │   ├── utils
    │   └── views
</pre>

<p>The <strong>domain</strong> subdirectory is for any class that you want to be persistent.
These classes are automatically mapped to the DB through Hibernate (or other GORM implementation)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              4/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Database Creation Magic</h1></header>
            
            
            <section><pre class="brush: groovy; highlight:[11]">
    dataSource {
        pooled = false
        username = "sa"
        password = ""
        loggingSql = true
    }

    environments {
        development {
            dataSource {
                dbCreate = "create-drop"
                //...
            }
        }
        test {
        //...
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              5/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>DB creation options</h1></header>
            
            
            <section><ul>
<li>create-drop<ul>
<li>Drop and re-create the database when Grails is run</li>
</ul>
</li>
<li>create<ul>
<li>Create the database if it doesn't exist, but don't modify it if it does</li>
</ul>
</li>
<li>update<ul>
<li>Create the database if it doesn't exist, and modify it if it does exist</li>
</ul>
</li>
<li>not defined<ul>
<li>do nothing to the database</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              6/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>DB Console</h1></header>
            
            
            <section><ul>
<li>grails run-app</li>
<li>browse to http://localhost:8080/dbconsole</li>
<li>use driver, username, password, url from <code>grails-app/conf/DataSource.groovy</code></li>
</ul>
<pre class="brush: groovy; highlight:[2,3,4, 10]">
    dataSource {
        driverClassName = "org.h2.Driver"
        username = "sa"
        password = ""
    }
    environments {
        development {
            dataSource {
                dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
                url = "jdbc:h2:mem:devDb;MVCC=TRUE"
            }
        }
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              7/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><img alt="DB Console Login" src="images/dbconsolelogin.png" title="DB Console Login" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              8/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><p><img alt="DB Console" src="images/dbconsole.png" title="DB Console" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              9/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre class="brush: groovy; highlight:[1]">
    class Customer {
        String name
        String accountNumber
    }
</pre>

<hr>

<pre class="brush: text; highlight:[1]">
    mysql> describe customer;
    +----------------+--------------+------+-----+---------+
    | Field          | Type         | Null | Key | Default |
    +----------------+--------------+------+-----+---------+
    | id             | bigint(20)   | NO   | PRI | NULL    |
    | version        | bigint(20)   | NO   |     | NULL    |
    | account_number | varchar(255) | NO   |     | NULL    |
    | name           | varchar(255) | NO   |     | NULL    |
    +----------------+--------------+------+-----+---------+
    4 rows in set (0.02 sec)
</pre>

<p><span class="notes">class name becomes table name</span></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              10/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre class="brush: groovy; highlight:[2,3]">
    class Customer {
        String name
        String accountNumber
    }
</pre>

<hr>

<pre class="brush: text; highlight:[7,8]">
    mysql> describe customer;
    +----------------+--------------+------+-----+---------+----------------+
    | Field          | Type         | Null | Key | Default | Extra          |
    +----------------+--------------+------+-----+---------+----------------+
    | id             | bigint(20)   | NO   | PRI | NULL    | auto_increment | 
    | version        | bigint(20)   | NO   |     | NULL    |                | 
    | account_number | varchar(255) | NO   |     | NULL    |                | 
    | name           | varchar(255) | NO   |     | NULL    |                | 
    +----------------+--------------+------+-----+---------+----------------+
    4 rows in set (0.02 sec)
</pre>

<p><span class="notes">attribute names are converted into column names</span></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              11/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre class="brush: groovy">
    class Customer {
        String name
        String accountNumber
    }
</pre>

<hr>

<pre class="brush: text; highlight:[5,6]">
    mysql> describe customer;
    +----------------+--------------+------+-----+---------+----------------+
    | Field          | Type         | Null | Key | Default | Extra          |
    +----------------+--------------+------+-----+---------+----------------+
    | id             | bigint(20)   | NO   | PRI | NULL    | auto_increment | 
    | version        | bigint(20)   | NO   |     | NULL    |                | 
    | account_number | varchar(255) | NO   |     | NULL    |                | 
    | name           | varchar(255) | NO   |     | NULL    |                | 
    +----------------+--------------+------+-----+---------+----------------+
    4 rows in set (0.02 sec)
</pre>

<p><span class="notes">id (PK) and version (optimistic locking) columns are added to DB, but don’t need to be explicitly specified in code</span></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              12/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>ID and Version - invisible attributes?</h1></header>
            
            
            <section><ul>
<li>ID and Version were added to the DB table for Customer</li>
<li>Where did they come from?</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              13/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>javap</h1></header>
            
            
            <section><pre class="brush: text; highlight:[7,8]">
    javap Customer
    Compiled from "Customer.groovy"
    public class calltrack.Customer 
        extends java.lang.Object 
        implements groovy.lang.GroovyObject {

            java.lang.Long id;
            java.lang.Long version;

            private java.lang.String name;
            private java.lang.String accountNumber;

            //. getters, setters, etc
        }
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              14/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>CRUD</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              15/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>CRUD</h1></header>
            
            
            <section><ul>
<li>Four basic functions of persistent storage:<ul>
<li>CREATE - <code>INSERT</code></li>
<li>READ - <code>SELECT</code></li>
<li>UPDATE - <code>UPDATE</code></li>
<li>DELETE - <code>DELETE</code></li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              16/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>SQL Logging</h1></header>
            
            
            <section><ul>
<li>turn on SQL logging with <code>logSql = true</code> in <code>grails-app/conf/DataSource.groovy</code></li>
</ul>
<pre class="brush: groovy; highlight:[5]">
    dataSource {
        pooled = false
        username = "sa"
        password = ""
        logSql = true
    }
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              17/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Create</h1></header>
            
            
            <section><pre class="brush: java; highlight:[4]">
    void testCreate() {
        Customer customer = 
            new Customer(name: 'Mike', accountNumber: '123')
        customer.save()
    }   
</pre>

<p><hr>
<pre class="brush: sql;">
    INSERT INTO customer
        (
            id, version, account_number, date_created, name
        )
        VALUES
        (
            NULL, ?, ?, ?, ?
        );
</pre></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              18/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Read</h1></header>
            
            
            <section><pre class="brush: java; highlight:[2,5]">
    void testRead() {
        Customer customer = Customer.read(1)
    }
    void testGet() {
        Customer customer = Customer.get(1)
    }
</pre>

<p><hr>
<pre class="brush: sql;">
    SELECT
        customer0_.id             AS id0_0_,
        customer0_.version        AS version0_0_,
        customer0_.account_number AS account3_0_0_,
        customer0_.date_created   AS date4_0_0_,
        customer0_.name           AS name0_0_
    FROM
        customer customer0_
    WHERE
        customer0_.id=?
</pre></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              19/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Update</h1></header>
            
            
            <section><p><pre class="brush: java; highlight:[8]">
void testUpdate() {
    //setup
    def c = new Customer(name: 'Mike',
            accountNumber: '123').save()
    //update
    Customer customer = Customer.get(c.id)
    customer.name = 'new value'
    customer.save()
}
</pre>
<hr>
<pre class="brush: sql;">
    UPDATE customer
    SET
        version=?,
        account_number=?,
        date_created=?,
        name=?
    WHERE
        id=?
    AND version=?
</pre></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              20/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Implicit Update</h1></header>
            
            
            <section><pre class="brush: java; highlight:[15, 16, 17]">
void testUpdateImplicit() {
    assert 0 == Customer.count()

    def c = new Customer(name: 'Mike', accountNumber: '123');
    c.save();

    c.name = 'Jim'
    c.save()

    assert c.name == Customer.get(c.id).name

    // beware the implicit update
    c.name = 'John'

    // even though c.save() hasn't been called,
    // the new name 'John' has been persisted!
    assert 'John' == Customer.get(c.id).name
}
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              21/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Delete</h1></header>
            
            
            <section><p><pre class="brush: java; highlight:[7]">
void testDelete() {
    //setup
    def c = new Customer(name: 'Mike',
            accountNumber: '123').save()
    //delete
    Customer customer = Customer.get(c.id)
    customer.delete()
}
</pre>
<hr>
<pre class="brush: sql;">
delete from customer where id=? and version=?
</pre></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              22/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Locking</h1></header>
            
            
            <section><p><img alt="Optimistic Locking illustrated" src="images/optimisticPessimistic.jpg" title="http://www.toadworld.com/Portals/0/GuyH/Contention/Feb2008/optimisticPessimistic.jpg" /></p>
<p><cite>http://www.toadworld.com/Portals/0/GuyH/
    Contention/Feb2008/optimisticPessimistic.jpg</cite></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              23/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Optimistic Locking (Default)</h1></header>
            
            
            <section><ul>
<li>Version column </li>
</ul>
<pre class="brush: sql;">
delete from customer where id=? and version=?
</pre>

<pre class="brush: sql; highlight:[3,9]">
    UPDATE customer
    SET
        version=?,
        account_number=?,
        date_created=?,
        name=?
    WHERE
        id=?
    AND version=?
</pre>

<ul>
<li>Version incremented with each update</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              24/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Pessimistic Locking</h1></header>
            
            
            <section><p><pre class="brush: java; highlight:[7]">
void testLock() {
    //setup
    def c = new Customer(name: 'Mike',
        accountNumber: '123').save()
    //use lock method to perform SELECT ... FOR UPDATE
    Customer.withTransaction {
        Customer customer = Customer.lock(c.id)
        customer.name = 'John'
        customer.save(flush: true)
    }
    // lock is automatically released at end of transaction
    assert 'John' == Customer.get(c.id).name
}
</pre></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              25/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Constraints and Validation</h1></header>
            
            
            <section><ul>
<li>By default, all properties are required (i.e. can’t be NULL)</li>
</ul>
<pre class="brush: groovy;">
def c = new Customer()
c.save()
println c.errors
</pre>

<pre class="brush: text;highlight:[5,8]">
org.springframework.validation.BeanPropertyBindingResult:
  2 errors
Field error in object 'Customer' on field 'accountNumber': 
    rejected value [null]; codes [......; default message 
    [Property [{0}] of class [{1}] cannot be null]
Field error in object 'Customer' on field 'name': 
    rejected value [null]; codes [......; default message 
    [Property [{0}] of class [{1}] cannot be null]
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              26/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Constraints closure</h1></header>
            
            
            <section><ul>
<li>By default, all properties are required (i.e. can’t be NULL)</li>
</ul>
<pre class="brush: groovy;">
class Customer { 
    String name
    String accountNumber
}
</pre>

<p>is the same as
<pre class="brush: groovy;highlight:[4,5,6,7]">
class Customer { 
    String name
    String accountNumber
    static constraints = {
        name(nullable:false)
        accountNumber(nullable:false)
    }
}
</pre></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              27/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Built In Constraints</h1></header>
            
            
            <section><ul>
<li><code>blank</code> - cannot be empty string</li>
<li><code>creditCard</code> - matches a credit card number</li>
<li><code>email</code> - valid email address</li>
<li><code>inList</code> - contained in a list of values</li>
<li><code>matches</code> - applies a regular expression</li>
<li><code>max</code> - maximum value of a class that implements comparable</li>
<li><code>min</code> - minimum value of a class that implements comparable</li>
<li><code>notEqual</code> - not equal to a specified value</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              28/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Built In Constraints</h1></header>
            
            
            <section><ul>
<li><code>nullable</code> - set to false for NOT NULL constraint</li>
<li><code>range</code> - within a min and max</li>
<li><code>scale</code> - performs rounding to a specified precision (doesn’t generate error messages)</li>
<li><code>size</code> - length of a string or collection</li>
<li><code>unique</code> - unique value</li>
<li><code>url</code> - URL address</li>
<li><code>validator</code> - custom validator</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              29/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Some constraints influence schema</h1></header>
            
            
            <section><pre class="brush: groovy;">
String name
String accountNumber
String phone
Date dateCreated
static constraints = {
    // name must be at least 2 chars; no more than 100
    name(nullable:false, size:2..100)
    // account number min length of 1 and max of 5 chars
    accountNumber(nullable:true, size:1..5)
    // phone number must be 10 digits
    phone(nullable:true, matches: /(\d{10})?/)
}
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              30/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre class="brush: groovy; highlight:[4]">
// ...
static constraints = {
    // name must be at least 2 chars; no more than 100
    name(nullable:false, size:2..100)
    // account number min length of 1 and max of 5 chars
    accountNumber(nullable:true, size:1..5)
    // phone number must be 10 digits
    phone(nullable:true, matches: /(\d{10})?/)
    // dateCreated not specified
}
</pre>

<pre class="brush: text; highlight:[9]">
mysql> describe customer;
+----------------+--------------+------+-----+---------+
| Field          | Type         | Null | Key | Default |
+----------------+--------------+------+-----+---------+
| id             | bigint(20)   | NO   | PRI | NULL    |
| version        | bigint(20)   | NO   |     |         |
| account_number | varchar(5)   | YES  |     | NULL    |
| date_created   | datetime     | NO   |     |         |
| name           | varchar(100) | NO   |     |         |
| phone          | varchar(255) | YES  |     | NULL    |
+----------------+--------------+------+-----+---------+
</pre>

<p>name field gets max length in DB of 100</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              31/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre class="brush: groovy; highlight:[6]">
// ...
static constraints = {
    // name must be at least 2 chars; no more than 100
    name(nullable:false, size:2..100)
    // account number min length of 1 and max of 5 chars
    accountNumber(nullable:true, size:1..5)
    // phone number must be 10 digits
    phone(nullable:true, matches: /(\d{10})?/)
    // dateCreated not specified
}
</pre>

<pre class="brush: text; highlight:[7]">
mysql> describe customer;
+----------------+--------------+------+-----+---------+
| Field          | Type         | Null | Key | Default |
+----------------+--------------+------+-----+---------+
| id             | bigint(20)   | NO   | PRI | NULL    |
| version        | bigint(20)   | NO   |     |         |
| account_number | varchar(5)   | YES  |     | NULL    |
| date_created   | datetime     | NO   |     |         |
| name           | varchar(100) | NO   |     |         |
| phone          | varchar(255) | YES  |     | NULL    |
+----------------+--------------+------+-----+---------+
</pre>

<p>account number nullable and max length of 5</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              32/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre class="brush: groovy; highlight:[8]">
// ...
static constraints = {
    // name must be at least 2 chars; no more than 100
    name(nullable:false, size:2..100)
    // account number min length of 1 and max of 5 chars
    accountNumber(nullable:true, size:1..5)
    // phone number must be 10 digits
    phone(nullable:true, matches: /(\d{10})?/) // no size
    // dateCreated not specified
}
</pre>

<pre class="brush: text; highlight:[10]">
mysql> describe customer;
+----------------+--------------+------+-----+---------+
| Field          | Type         | Null | Key | Default |
+----------------+--------------+------+-----+---------+
| id             | bigint(20)   | NO   | PRI | NULL    |
| version        | bigint(20)   | NO   |     |         |
| account_number | varchar(5)   | YES  |     | NULL    |
| date_created   | datetime     | NO   |     |         |
| name           | varchar(100) | NO   |     |         |
| phone          | varchar(255) | YES  |     | NULL    |
+----------------+--------------+------+-----+---------+
</pre>

<p>phone number gets default max size of 255 and nullable</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              33/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
            <section><pre class="brush: groovy; highlight:[9]">
// ...
static constraints = {
    // name must be at least 2 chars; no more than 100
    name(nullable:false, size:2..100)
    // account number min length of 1 and max of 5 chars
    accountNumber(nullable:true, size:1..5)
    // phone number must be 10 digits
    phone(nullable:true, matches: /(\d{10})?/) // no size
    // dateCreated not specified
}
</pre>

<pre class="brush: text; highlight:[8]">
mysql> describe customer;
+----------------+--------------+------+-----+---------+
| Field          | Type         | Null | Key | Default |
+----------------+--------------+------+-----+---------+
| id             | bigint(20)   | NO   | PRI | NULL    |
| version        | bigint(20)   | NO   |     |         |
| account_number | varchar(5)   | YES  |     | NULL    |
| date_created   | datetime     | NO   |     |         |
| name           | varchar(100) | NO   |     |         |
| phone          | varchar(255) | YES  |     | NULL    |
+----------------+--------------+------+-----+---------+
</pre>

<p>date_created gets default not nullable</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              34/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Validation</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              35/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Validation</h1></header>
            
            
            <section><ul>
<li>validation is implicitly called when .save() is called, but can also be called independently:</li>
</ul>
<pre class="brush:groovy;">
groovy> def c = new Customer()
groovy> println c.validate()
false   
</pre>

<ul>
<li>if validation fails, errors are placed in the errors property of the domain class<ul>
<li>can also check hasErrors()</li>
</ul>
</li>
</ul>
<pre class="brush:groovy;">
groovy> def c = new Customer()
groovy> c.validate()
groovy> println c.hasErrors()
true
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              36/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Validation</h1></header>
            
            
            <section><ul>
<li>Note that by default .save() does not throw an exception if validation fails and entity is NOT persisted</li>
</ul>
<pre class="brush:groovy;">
groovy> def c = new Customer()
groovy> c.validate()
groovy> println c.hasErrors()
true
</pre>

<pre class="brush:sql;">
mysql> select count (*) from customer;
+----------+
| count(*) |
+----------+
|        0 |
+----------+
1 row in set (0.00 sec)
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              37/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Validation</h1></header>
            
            
            <section><ul>
<li>Can be overridden by using “failOnError:true” in the .save() call</li>
</ul>
<pre class="brush:groovy;">
groovy> new Customer().save(failOnError:true) 
//...
Exception thrown
//...
grails.validation.ValidationException: 
  Validation Error(s) occurred during save():
- Field error in object 'caller.Customer' on field 
  'address': rejected value [null]; codes
</pre>

<ul>
<li>Can also be overridden globally in <code>grails-app/conf/Config.groovy</code><ul>
<li><code>grails.gorm.failOnError=true</code></li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              38/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Relationships</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              39/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Many to One - Unidirectional</h1></header>
            
            
            <section><pre class="brush:groovy;">
class Customer {
    Address address
}
class Address {
}   
</pre>

<ul>
<li>Unidirectional many-to-one relationship from Customer to Address</li>
<li>Address is not aware  of Customer</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              40/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Many to One - Unidirectional</h1></header>
            
            
            <section><pre class="brush:groovy;">
class Customer {
    Address address
}
class Address {
}

customer.address = new Address()
customer.save()
//transient object exception 

def address = new Address()
address.save()
customer.address = address
customer.save()
//OK
</pre>

<ul>
<li>Updates do not cascade</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              41/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Many to One - Unidirectional</h1></header>
            
            
            <section><pre class="brush:groovy;">
class Customer {
    Address address
}
class Address {
}

def address = new Address()
address.save()
customer.address = address
customer.save()

address.delete()
//FK constraint exception

customer.delete()
address.delete()
//OK
</pre>

<ul>
<li>Deletes do not cascade</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              42/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Many to One - Bidirectional</h1></header>
            
            
            <section><pre class="brush:groovy; highlight:[5]">
class Customer {
    Address address
}
class Address {
    static belongsTo = [customer:Customer]
}
</pre>

<ul>
<li>Address belongs to Customer</li>
<li>Saves and Deletes to Customer will cascade to Address</li>
</ul>
<pre class="brush:groovy;">
customer.address = new Address()
customer.save()
//OK
//saves both customer and address
 customer.delete()
//OK
//deletes customer and address  
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              43/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>One to Many</h1></header>
            
            
            <section><p><img alt="one to many" src="images/oneToMany.png" title="One To Many" /></p>
<ul>
<li>use "static hasMany = ..." definition</li>
<li>inserts and updates are cascaded</li>
<li>deletes cascade if belongsTo is defined</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              44/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>One to Many</h1></header>
            
            
            <section><p><img alt="one to many" src="images/oneToMany.png" title="One To Many" /></p>
<ul>
<li>default is java.util.Set; can use<ul>
<li>SortedSet (must implement comparable)</li>
<li>List (adds {table}_idx column)</li>
</ul>
</li>
<li>convenience methods:<ul>
<li>customer.addToIncidents(incident)</li>
<li>customer.removeFromIncidents(incident)</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              45/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>One to Many</h1></header>
            
            
            <section><p><img alt="one to many" src="oneToMany.png" title="One To Many" /></p>
<pre class="brush:groovy;">
class Customer { 
    static hasMany = [incidents:Incident]
}

class Incident {
    static belongsTo = [customer:Customer]
} 

//saves both Customer and Incident
def c = new Customer()
c.addToIncidents(new Incident())
c.save()

//deletes customer and all associated incidents
c.delete()  
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              46/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Many to Many</h1></header>
            
            
            <section><p><img alt="many to many" src="images/manyToMany.png" title="Many To Many" /></p>
<ul>
<li>both sides define hasMany</li>
<li>must define an owner (using belongsTo on the owned object)</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              47/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Many to Many</h1></header>
            
            
            <section><p><img alt="many to many" src="images/manyToMany.png" title="Many To Many" /></p>
<pre class="brush:groovy;">
class Customer { 
    static hasMany = [products:Product]
}

class Product { 
    static hasMany = [customers:Customer]
    //Customer owns the relationship
    static belongsTo = Customer 
    //inserts will cascade from customer not from product
}
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              48/49
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: orm.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Many to Many</h1></header>
            
            
            <section><ul>
<li>Realistically, there is often a concrete entity between the two sides of the relationship</li>
</ul>
<pre class="brush:groovy;">
class Customer { 
    static hasMany = [products:CustomerProduct]
}

class CustomerProduct {
    Customer customer
    Product product
    Date datePurchased
    static belongsTo = [Customer, Product]
}

class Product { 
    static hasMany = [customers:CustomerProduct]
}
</pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="orm.md">orm.md</a>
            </aside>
            
            <aside class="page_number">
              49/49
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Object Relational Mapping in Grails</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Object Relational Mapping in Grails</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Domain Class Basics</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Domain Class Location Convention</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Database Creation Magic</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">DB creation options</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">DB Console</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">-</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">-</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">-</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">-</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">-</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">ID and Version - invisible attributes?</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">javap</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">CRUD</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">CRUD</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">SQL Logging</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">Create</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Read</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Update</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Implicit Update</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Delete</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">Locking</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">Optimistic Locking (Default)</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">Pessimistic Locking</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">Constraints and Validation</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Constraints closure</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Built In Constraints</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">Built In Constraints</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">Some constraints influence schema</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">-</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">-</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">-</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">-</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">Validation</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">Validation</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">Validation</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">Validation</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">Relationships</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">Many to One - Unidirectional</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">Many to One - Unidirectional</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">Many to One - Unidirectional</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">Many to One - Bidirectional</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">One to Many</a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">One to Many</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
      <tr id="toc-row-46">
        <th><a href="#slide46">One to Many</a></th>
        <td><a href="#slide46">46</a></td>
      </tr>
      
      
      <tr id="toc-row-47">
        <th><a href="#slide47">Many to Many</a></th>
        <td><a href="#slide47">47</a></td>
      </tr>
      
      
      <tr id="toc-row-48">
        <th><a href="#slide48">Many to Many</a></th>
        <td><a href="#slide48">48</a></td>
      </tr>
      
      
      <tr id="toc-row-49">
        <th><a href="#slide49">Many to Many</a></th>
        <td><a href="#slide49">49</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>

<style>
div.attribution {
  position: fixed;
  width: 100%;
  bottom: 0;
  margin: 0;
  padding: .2em 0;
  color: white;
  text-align: center;
  background: gray;
  font-size:14px;
}
</style>

<div class="attribution"><strong>Object Relational Mapping in Grails</strong> | Mike Hugo — <a href="http://www.piragua.com/">Piragua Consulting, Inc</a>  | Slides powered by <a href="https://github.com/n1k0/landslide">Landslide</a> (type <code>h</code> for help)</div>


<script src="theme/js/syntaxhighlighter/shCore.js" type="text/javascript"></script>
<script src="theme/js/syntaxhighlighter/shBrushPlain.js" type="text/javascript"></script>
<script src="theme/js/syntaxhighlighter/shBrushCss.js" type="text/javascript"></script>
<script src="theme/js/syntaxhighlighter/shBrushGroovy.js" type="text/javascript"></script>
<script src="theme/js/syntaxhighlighter/shBrushJScript.js" type="text/javascript"></script>
<script src="theme/js/syntaxhighlighter/shBrushJava.js" type="text/javascript"></script>
<script src="theme/js/syntaxhighlighter/shBrushSql.js" type="text/javascript"></script>
<script src="theme/js/syntaxhighlighter/shBrushXml.js" type="text/javascript"></script>

<script type="text/javascript">
	SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.all()
</script>

</body>
</html>